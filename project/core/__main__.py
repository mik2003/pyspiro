import time

import matplotlib.pyplot as plt
import numpy as np

from project.core.epicycle import Epicycle

if __name__ == "__main__":
    start_time = time.time()
    e = Epicycle()
    n = 3
    radius = [64, 8, 2]  # n * [1]  # [1, 2, 3, 4, 5, 6, 7, 8, 9]
    speed = [1, 5, 9]
    angle_i = n * [0]  # [0, 0, 0, 0, 0, 0, 0, 0, 0]
    e.add_circles(radius, speed, angle_i)
    e.time = np.linspace(0, 2 / 3 * 2 * np.pi, int(60 * np.max(speed)))
    print(e.trajectory.shape)

    print(f"Execution time: {(time.time()-start_time)*1000} ms")

    plt.plot(e.trajectory[0, :], e.trajectory[1, :])
    plt.gca().set_aspect("equal", adjustable="box")
    plt.show()

    # n = [
    #     100000,
    #     200000,
    #     300000,
    #     400000,
    #     500000,
    #     600000,
    #     700000,
    #     800000,
    #     900000,
    #     1000000,
    #     2000000,
    #     3000000,
    #     4000000,
    #     5000000,
    #     6000000,
    #     7000000,
    #     8000000,
    #     9000000,
    #     10000000,
    #     20000000,
    #     30000000,
    #     40000000,
    #     50000000,
    #     60000000,
    #     70000000,
    #     80000000,
    #     90000000,
    #     100000000,
    # ]
    # t = [
    #     13.457775115966797,
    #     21.165132522583008,
    #     37.43863105773926,
    #     46.427249908447266,
    #     54.305315017700195,
    #     67.40021705627441,
    #     71.08712196350098,
    #     84.45405960083008,
    #     94.75469589233398,
    #     104.9203872680664,
    #     227.95653343200684,
    #     331.1295509338379,
    #     469.8061943054199,
    #     531.63743019104,
    #     694.4527626037598,
    #     725.1453399658203,
    #     859.6758842468262,
    #     992.6507472991943,
    #     1084.6257209777832,
    #     2038.5770797729492,
    #     3216.1340713500977,
    #     4399.988889694214,
    #     5306.391477584839,
    #     6194.374084472656,
    #     7428.556442260742,
    #     8411.401271820068,
    #     9488.494634628296,
    #     10832.392692565918,
    # ]

    # fig, ax = plt.subplots()
    # # ax.plot(np.log(n), np.log(t))
    # ax.plot(n, t)
    # ax.set_xscale("log")
    # ax.set_yscale("log")
    # plt.show()
